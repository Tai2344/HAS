<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
    <head th:replace="~{layout/plantilla :: head}">
        <title th:inline="text">[[#{administracion.listado.titulo}]]</title>
    </head>
    <body>
        <header th:replace="~{layout/plantilla :: header}"></header>
        <main class="container mt-5 text-center" th:inline="text">
            <h2 class="text-center mb-4">[[#{administracion.listado.titulo}]]</h2>

            <!-- Lista de Usuarios -->
            <h3 class="text-center mb-3">[[#{administracion.listado.usuariosregistrados}]]</h3>
            <table class="table table-striped table-hover mx-auto" style="max-width: 90%;">
                <thead class="table-success">
                    <tr>
                        <th class="text-center">[[#{administracion.listado.cedula}]]</th>
                        <th class="text-center">[[#{administracion.listado.nombre}]]</th>
                        <th class="text-center">[[#{administracion.listado.apellidos}]]</th>
                        <th class="text-center">[[#{administracion.listado.telefono}]]</th>
                        <th class="text-center">[[#{administracion.listado.padecimiento}]]</th>
                        <th class="text-center">[[#{administracion.listado.rol}]]</th>
                        <th class="text-center">[[#{administracion.listado.activo}]]</th>
                        <th class="text-center">[[#{administracion.listado.acciones}]]</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="usuario : ${usuarios}">
                        <td th:text="${usuario.cedula}" class="align-middle"></td>
                        <td th:text="${usuario.nombre}" class="align-middle"></td>
                        <td th:text="${usuario.apellidos}" class="align-middle"></td>
                        <td th:text="${usuario.telefono}" class="align-middle"></td>
                        <td th:text="${usuario.padecimiento} ?: #{administracion.listado.padecimiento.noespecificado}" class="align-middle"></td>
                        <td th:text="${usuario.rol.nombre}" class="align-middle"></td>
                        <td th:text="${usuario.activo} ? #{administracion.listado.activo.si} : #{administracion.listado.activo.no}" class="align-middle"></td>
                        <td class="align-middle">
                            <a th:href="@{/administracion/editarUsuario/{id}(id=${usuario.idUsuario})}" class="btn btn-warning btn-sm">[[#{administracion.listado.editar}]]</a>
                        </td>
                    </tr>
                </tbody>
            </table>

            <!-- Lista de Talleres -->
            <h3 class="text-center mb-3 mt-5">[[#{administracion.listado.gestiontalleres}]]</h3>
            <table class="table table-striped table-hover mx-auto" style="max-width: 90%;">
                <thead class="table-success">
                    <tr>
                        <th class="text-center">[[#{administracion.listado.codigo}]]</th>
                        <th class="text-center">[[#{administracion.listado.nombre}]]</th>
                        <th class="text-center">[[#{administracion.listado.activo}]]</th>
                        <th class="text-center">[[#{administracion.listado.acciones}]]</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="taller : ${talleres}">
                        <td th:text="${taller.codigo}" class="align-middle"></td>
                        <td th:text="${taller.nombre}" class="align-middle"></td>
                        <td th:text="${taller.activo} ? #{administracion.listado.activo.si} : #{administracion.listado.activo.no}" class="align-middle"></td>
                        <td class="align-middle">
                            <sec:authorize access="hasRole('ADMIN')">
                                <a th:href="@{/administracion/desactivarTaller/{id}(id=${taller.idTaller})}"
                                   th:if="${taller.activo}"
                                   class="btn btn-danger btn-sm me-1">[[#{administracion.listado.desactivar}]]</a>
                                <a th:href="@{/administracion/reactivarTaller/{id}(id=${taller.idTaller})}"
                                   th:if="${!taller.activo}"
                                   class="btn  btn-success btn-sm me-1"
                                   th:title="#{administracion.listado.reactivar}">[[#{administracion.listado.reactivar}]]</a>
                            </sec:authorize>
                        </td>
                    </tr>
                </tbody>
            </table>

            <!-- Boton para Ver Reservas -->
            <div class="text-center mt-4">
                <sec:authorize access="hasRole('ADMIN')">
                    <a href="/administracion/reservas" class="btn  btn-outline-secondary">[[#{administracion.listado.verreservasusuarios}]]</a>
                </sec:authorize>
            </div>
        </main>
        <footer th:replace="~{layout/plantilla :: footer}"></footer>
    </body>
</html>